@using System.Data
@model IEnumerable<FridgesWebApp.Models.FridgeEntity>

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>

<div class="col-4">
    <h2>Fridges List</h2>
</div>
<a href="https://localhost:7261/Fridges/CreateFridge">Create Fridge</a>
<table class="table table-bordered table-striped" style="width:100%">
    <thead>
        <tr>
            <th>@Html.DisplayName("Id")</th>
            <th>@Html.DisplayName("Name")</th>
            <th>@Html.DisplayName("Owner name")</th>
            <th>@Html.DisplayName("Model Id")</th>
            <th>@Html.DisplayName("Name of model")</th>
            <th>@Html.DisplayName("Year")</th>
            <th>@Html.DisplayName("Tools")</th>
        </tr>

    </thead>

    <tbody>

        @foreach (var item in Model)
        {
            <tr>
                <td>@Html.DisplayFor(modelitem => item.Id)</td>
                <td>@Html.DisplayFor(modelitem => item.Name)</td>
                <td>@Html.DisplayFor(modelitem => item.Owner_name)</td>
                <td>@Html.DisplayFor(modelitem => item.Model_Id)</td>
                <td>@Html.DisplayFor(modelitem => item.NameOfModel)</td>
                <td>@Html.DisplayFor(modelitem => item.Year)</td>
                <td>
                    @Html.ActionLink("Edit", "EditFridge", new { id = item.Id }) |
                    @Html.ActionLink("Products", "GetFridgeProducts", new { id = item.Id }) |
                    <a href="" id="deleteItem" class="deleteItem" data-target="#basic"
                   data-toggle="modal"
                   data-path="@Url.Action("DeleteFridge", "Fridges", new { id = @item.Id })">Delete</a>
                    <!-- Modal -->
                    <div class="modal fade" id="basic" tabindex="-1" role="basic" aria-hidden="true" style="display: none;">
                        <div class="modal-dialog">
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                                    <h4 class="modal-title">Delete Confirmation</h4>
                                </div>
                                <div class="modal-body">
                                    Are you sure you want to delete this fridge ?
                                </div>
                                <div class="modal-footer">
                                    <button data-dismiss="modal" type="button" class="btn btn-default">Cancel</button>
                                    <button id="btnContinueDelete" type="button" class="btn btn-primary">Delete</button>
                                </div>
                            </div>
                        </div>
                </td>
            </tr>
        }
    </tbody>
</table>

 <script type="text/javascript">
    var path_to_delete;

    $(".deleteItem").click(function (e) {
        path_to_delete = $(this).data('path');
    });

    $('#btnContinueDelete').click(function () {
        window.location = path_to_delete;
    });
 </script>